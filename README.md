# ve(3,3) DEX - å»ä¸­å¿ƒåŒ–äº¤æ˜“æ‰€

åŸºäº Solidly çš„ ve(3,3) æœºåˆ¶å®ç°çš„å®Œæ•´ DEX äº¤æ˜“æ‰€é¡¹ç›®ã€‚

## é¡¹ç›®æ¦‚è¿°

å®Œæ•´çš„å»ä¸­å¿ƒåŒ–äº¤æ˜“æ‰€(DEX)å®ç°ï¼Œé‡‡ç”¨ ve(3,3) æ²»ç†æœºåˆ¶ï¼Œç»“åˆäº† Curve çš„ ve tokenomics å’Œ Olympus DAO çš„ (3,3) åšå¼ˆè®ºè®¾è®¡ã€‚

### æ ¸å¿ƒç‰¹æ€§

- âœ… **åŒæ›²çº¿ AMM**: æ”¯æŒæ³¢åŠ¨æ€§èµ„äº§ (xyâ‰¥k) å’Œç¨³å®šå¸ (xÂ³y+yÂ³xâ‰¥k)
- âœ… **ve(3,3) æ²»ç†**: NFT å½¢å¼çš„æŠ•ç¥¨æ‰˜ç®¡ç³»ç»Ÿ
- âœ… **æµåŠ¨æ€§æ¿€åŠ±**: Gauge å’Œ Bribe æ¿€åŠ±æœºåˆ¶
- âœ… **æ‰‹ç»­è´¹åˆ†é…**: æ‰‹ç»­è´¹å½’æŠ•ç¥¨è€…æ‰€æœ‰
- âœ… **P0 å®‰å…¨ä¿®å¤**: 10é¡¹å…³é”®å®‰å…¨ä¿®å¤ï¼Œ100%æµ‹è¯•è¦†ç›–
- ğŸ”§ **å‰ç«¯ç•Œé¢**: React + TypeScript ç°ä»£åŒ–ç•Œé¢ï¼ˆå¼€å‘ä¸­ï¼‰

## é¡¹ç›®ç»“æ„

```
ve33-dex/
â”œâ”€â”€ contracts/           # æ™ºèƒ½åˆçº¦
â”‚   â”œâ”€â”€ core/           # æ ¸å¿ƒAMMåˆçº¦ (Token, Pair, Factory, Router)
â”‚   â”œâ”€â”€ governance/     # æ²»ç†åˆçº¦ (VotingEscrow, Voter, Gauge, Bribe, Minter)
â”‚   â”œâ”€â”€ interfaces/     # åˆçº¦æ¥å£
â”‚   â””â”€â”€ libraries/      # å·¥å…·åº“
â”œâ”€â”€ frontend/           # å‰ç«¯åº”ç”¨ (React + TypeScript)
â”œâ”€â”€ scripts/            # éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ test/               # æµ‹è¯•æ–‡ä»¶ (114ä¸ªæµ‹è¯•ç”¨ä¾‹, 100%é€šè¿‡)
â””â”€â”€ docs/               # é¡¹ç›®æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 16
- npm æˆ– yarn
- BSC Testnet BNB (ç”¨äºéƒ¨ç½²)

### å®‰è£…å’Œç¼–è¯‘

```bash
# å®‰è£…ä¾èµ–
npm install

# ç¼–è¯‘åˆçº¦
npm run compile
```

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm run test

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
npx hardhat test test/P0-VoterFlashLoan.test.ts
```

### éƒ¨ç½²åˆ°BSC Testnet

```bash
# é…ç½®ç¯å¢ƒå˜é‡ (.env)
PRIVATE_KEY=your_private_key
BSC_TESTNET_RPC=https://data-seed-prebsc-1-s1.binance.org:8545

# éƒ¨ç½²åˆçº¦
npm run deploy:bsc
```

### å¯åŠ¨å‰ç«¯ï¼ˆå¼€å‘ä¸­ï¼‰

```bash
cd frontend
npm install
npm run dev
```

## æŠ€æœ¯æ¶æ„

### ve(3,3) å·¥ä½œæœºåˆ¶

```
1. é”ä»“ â†’ ve-NFT
   ç”¨æˆ·é”å®šä»£å¸è·å¾—NFTæŠ•ç¥¨æƒï¼ˆé”å®šæ—¶é—´è¶Šé•¿ï¼Œæƒé‡è¶Šå¤§ï¼‰

2. æŠ•ç¥¨ â†’ æ¿€åŠ±åˆ†é…
   ve-NFTæŒæœ‰è€…æŠ•ç¥¨å†³å®šæ¯å‘¨æ¿€åŠ±åˆ†é…åˆ°å“ªäº›æµåŠ¨æ€§æ± 

3. æ”¶ç›Š â†’ æ‰‹ç»­è´¹ + è´¿èµ‚
   è·å¾—æŠ•ç¥¨æ± çš„äº¤æ˜“æ‰‹ç»­è´¹å’Œé¡¹ç›®æ–¹è´¿èµ‚å¥–åŠ±

4. åç¨€é‡Š â†’ rebase
   é”ä»“è€…è·å¾—ä»£å¸å¢å‘è¡¥å¿ï¼Œé˜²æ­¢ç¨€é‡Šï¼ˆ(3,3) æœºåˆ¶ï¼‰
```

### æ ¸å¿ƒåˆçº¦

| åˆçº¦ | åŠŸèƒ½ | çŠ¶æ€ |
|------|------|------|
| **Token.sol** | æ²»ç†ä»£å¸ï¼Œæ”¯æŒé“¸é€ æƒé™æ§åˆ¶ | âœ… å·²å®Œæˆ |
| **Pair.sol** | åŒæ›²çº¿AMMäº¤æ˜“å¯¹ | âœ… å·²å®Œæˆ + P0ä¿®å¤ |
| **Factory.sol** | äº¤æ˜“å¯¹å·¥å‚ | âœ… å·²å®Œæˆ |
| **Router.sol** | ç”¨æˆ·äº¤äº’è·¯ç”± | âœ… å·²å®Œæˆ |
| **VotingEscrow.sol** | ve-NFTæŠ•ç¥¨æ‰˜ç®¡ | âœ… å·²å®Œæˆ |
| **Voter.sol** | æŠ•ç¥¨ç®¡ç† | âœ… å·²å®Œæˆ + P0ä¿®å¤ |
| **Gauge.sol** | æµåŠ¨æ€§æ¿€åŠ± | âœ… å·²å®Œæˆ + P0ä¿®å¤ |
| **Bribe.sol** | æŠ•ç¥¨è´¿èµ‚ | âœ… å·²å®Œæˆ + P0ä¿®å¤ |
| **Minter.sol** | ä»£å¸é“¸é€ åˆ†å‘ | âœ… å·²å®Œæˆ + P0ä¿®å¤ |

### P0 å®‰å…¨ä¿®å¤ï¼ˆå·²å®Œæˆï¼‰

| ä¿®å¤é¡¹ | é—®é¢˜ | è§£å†³æ–¹æ¡ˆ | æµ‹è¯• |
|--------|------|----------|------|
| **Flash Loané˜²æŠ¤** | åŒåŒºå—åˆ›å»º+æŠ•ç¥¨æ”»å‡» | æœ€å°æŒæœ‰æœŸï¼ˆ1å¤©ï¼‰ | âœ… P0-024 |
| **Minteråˆ†é…** | approve vs transfer | æ”¹ç”¨transferç›´æ¥åˆ†é… | âœ… P0-016/017 |
| **Pairæœ€å°æµåŠ¨æ€§** | OpenZeppelinå…¼å®¹æ€§ | mintåˆ°æ­»äº¡åœ°å€ | âœ… P0-004 |
| **decimalç¼©æ”¾** | ç¨³å®šæ± æº¢å‡º | ä½¿ç”¨10**decimals() | âœ… P0-004 |
| **skim/sync** | ç¼ºå¤±Uniswap V2å‡½æ•° | å®Œæ•´å®ç° | âœ… P0-004 |
| **Gaugeç²¾åº¦** | å°é¢LPæŸå¤± | 1e18ç²¾åº¦ | âœ… P0-032 |
| **Bribeç²‰å°˜é˜²æŠ¤** | ç²‰å°˜æ”»å‡» | æœ€å°å­˜æ¬¾é˜ˆå€¼ | âœ… P0-033 |

**æµ‹è¯•è¦†ç›–ç‡**: 114/114 æµ‹è¯•é€šè¿‡ (100%)

## æŠ€æœ¯æ ˆ

### æ™ºèƒ½åˆçº¦
- Solidity ^0.8.20
- Hardhat - å¼€å‘æ¡†æ¶
- OpenZeppelin 5.x - å®‰å…¨åˆçº¦åº“
- ethers.js v6 - Web3äº¤äº’

### å‰ç«¯
- React 18 + TypeScript
- Vite - æ„å»ºå·¥å…·
- TailwindCSS - UIæ¡†æ¶

## å¼€å‘åŸåˆ™

- **KISS**: ç®€æ´ä¼˜å…ˆï¼Œé¿å…è¿‡åº¦è®¾è®¡
- **DRY**: å¤ç”¨OpenZeppelinå’Œæˆç†Ÿä»£ç 
- **SOLID**: æ¨¡å—åŒ–è®¾è®¡ï¼Œæ¸…æ™°èŒè´£
- **YAGNI**: å…ˆå®ç°æ ¸å¿ƒï¼Œé¿å…è¿‡æ—©ä¼˜åŒ–

## å®‰å…¨æªæ–½

- âœ… OpenZeppelinç»è¿‡å®¡è®¡çš„åˆçº¦åº“
- âœ… ReentrancyGuardé˜²é‡å…¥æ”»å‡»
- âœ… SafeERC20å®‰å…¨ä»£å¸è½¬è´¦
- âœ… 100%æµ‹è¯•è¦†ç›–ç‡ï¼ˆ114ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼‰
- âœ… 10é¡¹P0å…³é”®å®‰å…¨ä¿®å¤
- ğŸ”§ ä¸“ä¸šå®‰å…¨å®¡è®¡ï¼ˆè®¡åˆ’ä¸­ï¼‰

## è·¯çº¿å›¾

- [x] é¡¹ç›®åˆå§‹åŒ–å’Œé…ç½®
- [x] æ ¸å¿ƒAMMåˆçº¦å®ç°
- [x] æ²»ç†ç³»ç»Ÿåˆçº¦å®ç°
- [x] P0å®‰å…¨ä¿®å¤ï¼ˆ10é¡¹ï¼‰
- [x] å®Œæ•´æµ‹è¯•è¦†ç›–ï¼ˆ100%ï¼‰
- [ ] BSC Testnetéƒ¨ç½²ï¼ˆå‡†å¤‡ä¸­ï¼‰
- [ ] Web3å‰ç«¯é›†æˆ
- [ ] ä¸»ç½‘éƒ¨ç½²å‰å®¡è®¡

## å‚è€ƒèµ„æ–™

- [Solidly æºç ](https://github.com/velodrome-finance/solidly)
- [ve(3,3) ç™½çš®ä¹¦](https://andrecronje.medium.com/ve-3-3-44466eaa088b)
- [Curve ve Tokenomics](https://curve.fi/vecrv)

## è®¸å¯è¯

MIT License

---

**âš ï¸ å…è´£å£°æ˜**: æœ¬é¡¹ç›®ä»åœ¨å¼€å‘ä¸­ï¼Œæ™ºèƒ½åˆçº¦æœªç»ç¬¬ä¸‰æ–¹å®¡è®¡ï¼Œè¯·å‹¿åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ã€‚
